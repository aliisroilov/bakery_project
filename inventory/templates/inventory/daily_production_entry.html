{% extends "base.html" %}
{% load widget_tweaks %}
{% block title %}Kunlik Ishlab Chiqarish{% endblock %}

{% block content %}
<div class="min-h-screen bg-gradient-to-br from-[#FAF8F5] via-[#FFFDF8] to-[#F6C87B]/10 py-10 px-6">

  <!-- ðŸ·ï¸ Header -->
  <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-10">
    <h1 class="text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-[#B67B3F] to-[#F6C87B] drop-shadow-sm mb-4 sm:mb-0">
      Kunlik Ishlab Chiqarish
    </h1>
    <a href="{% url 'inventory:inventory_dashboard' %}"
       class="bg-gradient-to-r from-[#E6B566] to-[#B67B3F] hover:from-[#DFAE59] hover:to-[#9C6A33] text-white px-5 py-2.5 rounded-xl shadow-md hover:shadow-lg transition-all transform hover:-translate-y-0.5 text-sm font-semibold">
       ðŸ”™ Orqaga
    </a>
  </div>

  <!-- ðŸ“‹ Production Entry Form -->
  <div class="bg-white/90 backdrop-blur-xl rounded-3xl shadow-xl border border-[#E6B566]/40 p-8 mb-12">
    <h2 class="text-2xl font-bold text-[#8A6233] mb-5">Mahsulot Miqdorini Kiriting</h2>
    <form method="POST" class="space-y-4">
      {% csrf_token %}
      {{ form.non_field_errors }}
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        {% for field in form %}
        <div>
          <label class="block text-gray-700 font-medium mb-2">{{ field.label }}</label>
          {{ field|add_class:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#B67B3F]" }}
          {% if field.errors %}
          <p class="text-red-600 text-sm mt-1">{{ field.errors|striptags }}</p>
          {% endif %}
        </div>
        {% endfor %}
      </div>
      <button type="submit"
        class="bg-gradient-to-r from-[#B67B3F] to-[#F6C87B] hover:from-[#A36E33] hover:to-[#F1C05A] text-white px-6 py-2.5 rounded-xl shadow-md hover:shadow-lg transition-all transform hover:-translate-y-0.5 text-sm font-semibold">
        âœ… Qoâ€˜shish
      </button>
    </form>
  </div>

  

  <!-- ðŸž Bakery Stock -->
  <div class="bg-white/90 backdrop-blur-xl rounded-3xl shadow-xl border border-[#E6B566]/40 p-8 mt-12">
    <h2 class="text-2xl font-bold text-[#8A6233] mb-5">Tayyor Mahsulot Ombori</h2>
    <div class="overflow-x-auto rounded-xl border border-[#E6B566]/30">
      <table class="w-full table-auto text-sm text-left text-gray-700">
        <thead class="bg-[#F6C87B]/30 text-[#8A6233] uppercase text-xs">
          <tr>
            <th class="px-4 py-3">Mahsulot</th>
            <th class="px-4 py-3 text-right">Joriy Miqdor</th>
            <th class="px-4 py-3 text-right">Yangilangan Sana</th>
          </tr>
        </thead>
        <tbody>
          {% for stock in stocks %}
          <tr class="border-b border-[#F1E3C2] hover:bg-[#FFF8E5] transition-all {% if stock.quantity < stock.product.min_stock %}bg-red-50{% endif %}">
            <td class="px-4 py-2 font-semibold text-gray-800">{{ stock.product.name }}</td>
            <td class="px-4 py-2 text-right {% if stock.quantity < stock.product.min_stock %}text-red-600{% else %}text-[#A36E33]{% endif %} font-semibold">{{ stock.quantity|floatformat:2 }}</td>
            <td class="px-4 py-2 text-right text-gray-500">{{ stock.updated_at|date:"d M Y" }}</td>
          </tr>
          {% empty %}
          <tr><td colspan="3" class="text-center py-4 text-gray-400">Tayyor mahsulotlar mavjud emas.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

</div>
{% endblock %}
